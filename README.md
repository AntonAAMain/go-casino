# Casino Microservices Project

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –∫–∞–∑–∏–Ω–æ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

**–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:**

```bash
docker-compose up --build -d
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:

- ‚úÖ –°–æ–±–µ—Ä–µ—Ç –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã (admin, auth, payment, cases, inventory)
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç Prometheus –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç Grafana –¥–ª—è –¥–∞—à–±–æ—Ä–¥–æ–≤
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç —Å–µ—Ç—å –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

## üåê –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

| –°–µ—Ä–≤–∏—Å            | URL                   | –û–ø–∏—Å–∞–Ω–∏–µ                             |
| ----------------- | --------------------- | ------------------------------------ |
| **Admin API**     | http://localhost:8082 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (–º–∞—à–∏–Ω—ã, –±–æ–∫—Å—ã) |
| **Auth API**      | http://localhost:8080 | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π         |
| **Payment API**   | http://localhost:8081 | –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π                   |
| **Cases API**     | http://localhost:8084 | –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–æ–≤                      |
| **Inventory API** | http://localhost:8085 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º                |
| **Prometheus**    | http://localhost:9090 | –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥                 |
| **Grafana**       | http://localhost:3000 | –î–∞—à–±–æ—Ä–¥—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏                |

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **Prometheus**: —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **Grafana**: –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ (login: `admin`, password: `admin`)

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:

- `admin_*` - –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- `auth_*` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `payment_*` - –ø–ª–∞—Ç–µ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `cases_*` - –æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–æ–≤
- `inventory_*` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º

## üöÄ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è

### Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –º–∞—à–∏–Ω (`GET /admin/car/all`)

- **–ö–ª—é—á –∫—ç—à–∞**: `cars:all`
- **TTL**: 5 –º–∏–Ω—É—Ç
- **–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è**: –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –º–∞—à–∏–Ω—ã —á–µ—Ä–µ–∑ `POST /admin/car/create`

#### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –∫ `/admin/car/all` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Redis
2. –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞
3. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—à–∏–Ω—ã –∫—ç—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è
4. –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å –∑–∞–Ω–æ–≤–æ –ø–æ–ª—É—á–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- ‚ö° **–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫** –Ω–∞ —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —á–µ—Ä–µ–∑ Redis –º–µ—Ç—Ä–∏–∫–∏

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–º

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose down

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose logs

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up --build --force-recreate -d
```

## üìÅ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
casino/
‚îú‚îÄ‚îÄ admin/          # Admin —Å–µ—Ä–≤–∏—Å (–ø–æ—Ä—Ç 8082)
‚îú‚îÄ‚îÄ auth/           # Auth —Å–µ—Ä–≤–∏—Å (–ø–æ—Ä—Ç 8080)
‚îú‚îÄ‚îÄ payment/        # Payment —Å–µ—Ä–≤–∏—Å (–ø–æ—Ä—Ç 8081)
‚îú‚îÄ‚îÄ cases/          # Cases —Å–µ—Ä–≤–∏—Å (–ø–æ—Ä—Ç 8084)
‚îú‚îÄ‚îÄ inventory/      # Inventory —Å–µ—Ä–≤–∏—Å (–ø–æ—Ä—Ç 8085)
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ prometheus.yml
‚îú‚îÄ‚îÄ grafana/
‚îÇ   ‚îú‚îÄ‚îÄ dashboards/
‚îÇ   ‚îî‚îÄ‚îÄ provisioning/
‚îî‚îÄ‚îÄ init-postgres.sql
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- **PostgreSQL**: –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î (–ø–æ—Ä—Ç 5433)
- **Redis**: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–æ—Ä—Ç 6379)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –æ—Ç–¥–µ–ª—å–Ω–æ:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
docker-compose up -d postgres redis

# –í –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ
cd admin && go run cmd/admin/main.go
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ—Ä—Ç–∞—Ö –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- Prometheus –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- Grafana –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

## üöÄ Production

–î–ª—è production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å secrets –¥–ª—è –ø–∞—Ä–æ–ª–µ–π
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å reverse proxy (nginx/traefik)
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å volumes –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
